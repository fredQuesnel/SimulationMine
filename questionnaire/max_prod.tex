 \section{Affectation des camions pour maximiser la production}
\label{sec:score}

Dans cette section, nous souhaitons maximiser la production totale (minerai + stérile) de la mine. Pour ce faire, il vous faudra développer les stratégies pour prendre les décisions suivantes : 

\begin{enumerate}
	\item \textbf{Affectation à une pelle : }Lorsqu'un camion vient de se faire décharger (à un concentrateur ou une pelle) et devient disponible, à quelle pelle doit-il aller se faire remplir?
	\item \textbf{Choix de la station de décharge : }Lorsqu'une pelle termine de charger un camion, vers quelle station (stérile ou concentrateur) doit aller se faire décharger le camion? 
\end{enumerate}



\vspace{10pt}
\noindent \textbf{\Large Protocole expérimental: }

\begin{itemize}
	\item Mine : 10 pelles
	\item Nombre de camions de 60 tonnes : 20
	\item Nombre de camions de 100 tonnes : 20
	\item Temps de simulation : 24h
\end{itemize}


\vspace{10pt}
\noindent \textbf{\large Étapes de simulation :  }
\begin{enumerate}
	\item Lancer la simulation (à l'aide du bouton \textit{play}, ou \textit{compléter auto)}.
	\item Enregistrer les résultats.
\end{enumerate}

\noindent\textbf{Astuces : }

\begin{itemize}
	\item N'hésitez pas à utiliser la mine à 4 pelles, ou un nombre moins élevé de camions pour déboguer vos fonctions de score!
	\item Rappelez-vous que certains éléments de la simulation sont aléatoires! Exécutez chaque simulation plusieurs fois afin d'obtenir des résultats statistiquement significatifs.
\end{itemize}



%-------------------------------------
% fonction de score
%-------------------------------------
\subsection{Affectation à une pelle à l'aide d'une formule simple} 
\label{max_prod:score}

Une première façon de contrôler l'affectation des camions est de modifier le champ \textit{fonction de score} de l'interface graphique. Vous pouvez entrer dans ce champ une formule qui calcule un \textit{score} pour chaque pelle, correspondant à l'utilité d'affecter le camion disponible à la pelle. Le logiciel assigne ensuite le camion à la pelle ayant le plus petit score. En cas d'égalité, la pelle avec le plus petit numéro est choisie.

Votre fonction de score peut contenir toutes les variables fournies dans la section \ref{sec:vars}, ainsi que les opérations élémentaires (+, -, *, /, \%). Les exposants peuvent également être utilisés à l'aide de la fonction Java (\verb!Math.pow([base], [exopsant]!). Par exemple, entrer la formule "n1" envoie toujours un camion disponible à la pelle ayant le moins de camions en attente.

\vspace{10pt} 
\noindent\textbf{Dans votre réponse,}  
\begin{itemize}
	\item Indiquez la fonction de score choisie.
	\item Expliquez le raisonnement derrière votre fonction de score.
	\item Comparez la production obtenue avec votre formule d'assignation avec celle d'une assignation aléatoire (écrivez "aléatoire" dans le champ \textit{fonction de score}).
\end{itemize}


%--------------------------------------
% Avec code
%--------------------------------------
\subsection{Décisions d'affectation à l'aide de règles complexes} 
\label{max_prod:code}


Vous devez maintenant programmer des règles de décision plus complexes en modifiant la classe CustomDecisionMaker. Plus précisément, 

\begin{itemize}
	\item Modifiez les fonctions \verb!computeDecisionScore! et \verb!computeCustomDecisionScore! pour créer une fonction de score pour l'affectation de camions aux pelles.
	\item Modifiez les fonctions \verb!selectReturnStation! et \verb!customSelectReturnStation! pour choisir vers quelle station de déchargement (quel stérile ou concentrateur) un camion ira se faire décharger.
\end{itemize}

\red{Peut-être seulement le deuxième point. Le premier point est redondant avec une question de la section suivante...}

\vspace{10pt}
\noindent\textbf{Dans votre réponse,} 

\begin{itemize}
	\item Décrivez brièvement vos algorithmes.
	\item Comparez la production obtenue avec votre formule d'assignation vos résultats de la question \ref{max_prod:score}.
\end{itemize}


%---------------------------------------------
% deux types de camions
%---------------------------------------------
\subsection{Deux types de camions}
Certains camions étaient vieux et ont été remplacés par des camions nouvelle génération. Ceux-ci sont plus lents, mais ont une capacité de 100 tonnes.

Proposez et implémentez une stratégie qui tire avantage des deux types de camions. Répondez aux mêmes questions qu'à la question \ref{max_prod:code}.

\red{Pour être honnête, je ne sais pas ce que je ferais... On peut toujours voir ce que les étudiants inventeront!}


%---------------------------------------------
% Affectation
%---------------------------------------------
\subsection{Problème d'affectation}

Vous pouvez également prendre les décisions d'affectation en résolvant le problème d'affectation suivant : 

\red{TODO écrire le problème}

On assigne le camion qui nous intéresse selon la solution du problème, et on écarte le reste de la solution. Pour activer cette fonctionnalité, entrez \red{optimise\_production} dans le champ \textit{fonction de score}.

\vspace{10pt}
\noindent\textbf{Dans votre réponse,} 

\begin{itemize}
	\item Donnez un exemple hypothétique pour lequel il est avantageux d'utiliser un problème d'affectation par rapport à assigner les camions un par un.
	\item Comparez la production obtenue avec le problème d'affectation avec ceux de la question \ref{max_prod:code}. 
	\item Comment expliquez-vous les résultats obtenus?
\end{itemize}
\red{Selon mes tests, ici le problème d'affectation marche moins bien que la façon "1 camion à la fois". C'est parce que la fonction objectif minimise le temps d'attente des pelles, ce qui n'est pas toujours optimal. Par exemple, il peut être préférable d'envoyer les camions à une pelle plus proche quitte à laisser attendre une pelle éloignée. Il n'est pas évident de trouver une fonction objectif qui fait ce que l'on veut sans effets pervers. En gros, il faut s'assurer que ce qui est avantageux pour le camion qui nous intéresse ne soit pas plus avantageux pour un camion qui deviendra disponible plus tard. }




